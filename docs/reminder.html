<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>reminder.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>reminder.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      <p>Remainder python module.</p>
<p>Checks in a data base when an event needs to be reminded.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p>External imports</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="kn">import</span> <span class="nn">reminder_database_model</span> <span class="kn">as</span> <span class="nn">db_model</span>
<span class="kn">import</span> <span class="nn">peewee</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <h3><span id="reminder-class" href="reminder-class"> Reminder Class </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">class</span> <span class="nc">Reminder</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>Checks and modifies a database.</p>
<p>Methods:</p>
<ul>
<li>initialize - Initialize the database object.</li>
<li>connect - Connect to the database.</li>
<li>close - Close the connection.</li>
<li>save_event - Save the event in the data base.</li>
<li>update_event - Updates an existing event.</li>
<li>get_event - Get the event from the data base.</li>
<li>delete_event - Delete event from Database.</li>
<li>next_event - Return nearest event.</li>
<li>get_all_events - Return all events sorted by date.</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <h3><span id="initialize-connection" href="initialize-connection"> Initialize connection </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_name</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>Initialize the database object.</p>
<p>Sets the database name for connecting to it later</p>
<p>Args:</p>
<ul>
<li>db_name - The database name</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">db_model</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">db_name</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <h3><span id="connect" href="connect"> Connect </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Connect to the database.</p>
<p>Starts the connection to perform queris to the database.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">db_model</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <h3><span id="close-connection" href="close-connection"> Close connection </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Close the connection.</p>
<p>Closes the connection after the database use.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">db_model</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <h3><span id="save-event" href="save-event"> Save event </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">save_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_event</span><span class="p">,</span> <span class="n">date_event</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>Save the event in the data base.</p>
<p>Performs a query sentence to save the event in the data base.</p>
<p>Args:</p>
<ul>
<li>id_event - ID of the event</li>
<li>event_date - Reminder date of the event</li>
</ul>
<p>Returns:</p>
<ul>
<li>The inserted object if everything went ok</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">insertion</span> <span class="o">=</span> <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
                <span class="n">id_event</span><span class="o">=</span><span class="n">id_event</span><span class="p">,</span> <span class="n">date_event</span><span class="o">=</span><span class="n">date_event</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">peewee</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">insertion</span><span class="o">.</span><span class="n">id_event</span><span class="p">:</span> <span class="n">insertion</span><span class="o">.</span><span class="n">date_event</span><span class="p">}</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>Update an existing event.</p>
<p>Performs an update query to to an existing event of the database</p>
<p>Args:</p>
<ul>
<li>id_event - The existing event id</li>
<li>new_date_event - The updated date</li>
</ul>
<p>Returns:</p>
<ul>
<li>result - Number of rows updated (should be 1)</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">update_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_event</span><span class="p">,</span> <span class="n">new_date_event</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">update</span> <span class="o">=</span> <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">date_event</span><span class="o">=</span><span class="n">new_date_event</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">id_event</span> <span class="o">==</span> <span class="n">id_event</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <h3><span id="delete-event" href="delete-event"> Delete event </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">delete_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_event</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>Delete event from Database.</p>
<p>Performs a query sentence to remove a tuple from the database.</p>
<p>Args:</p>
<ul>
<li>id_event - ID of the event</li>
</ul>
<p>Returns:</p>
<ul>
<li>result - Number of rows deleted (should be 1)</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
                <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">id_event</span> <span class="o">==</span> <span class="n">id_event</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <h3><span id="get-event" href="get-event"> Get event </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">get_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">id_event</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>Get the event from the data base.</p>
<p>Performs a query sentence to get the event from the data base.</p>
<p>Args:</p>
<ul>
<li>id_event - ID of the event</li>
</ul>
<p>Returns:</p>
<ul>
<li>selected - Dictionary of id_event: date_event as key: value</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">id_event</span><span class="p">:</span> <span class="n">date_event</span>
                <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">id_event</span><span class="p">,</span> <span class="n">date_event</span> <span class="ow">in</span> <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>
                <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">id_event</span> <span class="o">==</span> <span class="n">id_event</span><span class="p">)</span><span class="o">.</span><span class="n">tuples</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">selected</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <h3><span id="next-event" href="next-event"> Next event </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">next_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      <p>Return nearest event.</p>
<p>Performs a query sentence to get the nearest event from the data base.</p>
<p>Returns:</p>
<ul>
<li>selected - Dictionary of id_event: date_event as key: value</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">id_event</span><span class="p">:</span> <span class="n">date_event</span>
                <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">id_event</span><span class="p">,</span> <span class="n">date_event</span> <span class="ow">in</span> <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>
                <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">date_event</span><span class="p">)</span><span class="o">.</span><span class="n">limit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">tuples</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">selected</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <h3><span id="get-all-events" href="get-all-events"> Get all events </span></h3>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">def</span> <span class="nf">get_all_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>Return all events sorted by date.</p>
<p>Performs a query sentence to get every event from the data base.</p>
<p>Returns:</p>
<ul>
<li>events - Dictionaries of id_event: date_event as key: value for each
event</li>
</ul>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">try</span><span class="p">:</span>
            <span class="n">events</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">id_event</span><span class="p">:</span> <span class="n">date_event</span>
                <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">id_event</span><span class="p">,</span> <span class="n">date_event</span> <span class="ow">in</span> <span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">select</span><span class="p">()</span>
                <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="n">db_model</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">date_event</span><span class="p">)</span><span class="o">.</span><span class="n">tuples</span><span class="p">()</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">events</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
